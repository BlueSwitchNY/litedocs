# Migration `20210114194810-entry-category`

This migration has been generated by Perry Raskin at 1/14/2021, 2:48:10 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "Entry" ADD COLUMN     "categoryId" INTEGER

CREATE TABLE "Category" (
"id" SERIAL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "name" TEXT NOT NULL,

    PRIMARY KEY ("id")
)

ALTER TABLE "Entry" ADD FOREIGN KEY("categoryId")REFERENCES "Category"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201221000054-log-team-reference..20210114194810-entry-category
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model User {
   id          Int      @id @default(autoincrement())
@@ -28,15 +28,24 @@
   body        String
   code        String
   dateUpdated DateTime       @default(now())
   teamId      Int?
+  categoryId  Int?
   Team        Team?          @relation(fields: [teamId], references: [id])
   Author      User?          @relation(fields: [userId], references: [id])
   History     EntryHistory[]
   Logs        Log[]
   Tags        Tag[]
+  Category    Category?      @relation(fields: [categoryId], references: [id])
 }
+model Category {
+  id        Int      @id @default(autoincrement())
+  createdAt DateTime @default(now())
+  name      String
+  Entries   Entry[]
+}
+
 model Tag {
   id        Int      @id @default(autoincrement())
   createdAt DateTime @default(now())
   entryId   Int?
@@ -77,9 +86,9 @@
   handle    String   @unique
   imageUrl  String
   Entries   Entry[]
   Members   Member[]
-  Logs       Log[]
+  Logs      Log[]
 }
 model Member {
   id         Int      @id @default(autoincrement())
```


